<ui:composition template="/WEB-INF/templates/plantilla.xhtml" 
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="title">Autenticando</ui:define>
    <ui:define name="content">
        <div id="top" class="top">
            <h2>INICIAR SESIÓN</h2>
        </div>
            <c:choose>
                <c:when test="#{empty infoSesion.usuario}">
                    <h:form id="login">
                        <table>
                            <tr>
                                <td>Usuario: </td>
                                <td><h:inputText value="#{login.usuario.cuenta}"/></td>
                            </tr>
                            <tr>
                                <td>Contraseña: </td>
                                <td><h:inputSecret value="#{login.usuario.contrasenia}"/></td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <h:commandButton value="Autenticar" action="#{login.entrar()}"/>
                                </td>
                            </tr>
                        </table>
                    </h:form>
                </c:when>
                <c:otherwise>
                    <h:form>
                        <p>Está autenticado como <h:outputText value="#{infoSesion.usuario.cuenta}"/>.</p>
                        <p><h:link outcome="/index.xhtml">Volver al index</h:link></p>
                        <p>Para iniciar sesión con otra cuenta debe <h:commandLink action="#{infoSesion.invalidarSesion()}">salir</h:commandLink> primero de la aplicación</p>
                    </h:form>
                </c:otherwise>
            </c:choose>
            <h:form>
                <p>Si no tiene cuenta puede crear una en la <h:link outcome="registroUsuario.xhtml">página de registro</h:link></p>
            </h:form>
        <h:messages/>
    </ui:define>
</ui:composition>
